#!groovy

properties([
  pipelineTriggers([cron('20 21 * * *')])
])

@Library("Infrastructure")

def type = "java"

def product = "fpl"
def component = "fpl-service"

withNightlyPipeline(type, product, component) {

  env.URL = 'http://ccd-case-management-web-aat.service.core-compute-aat.internal';
  env.PROXY_SERVER = "proxyout.reform.hmcts.net:8080";

//  enableMutationTest()
//
//  after('mutationTest') {
//    withSonarQubeEnv("SonarQube") {
//      sh "./gradlew --info sonarqube"
//    }
//  }

  node () {
    stage ("functionalTests"){
      try {
        sh '''
            ./gradlew functional
            '''
      } catch (Exception err) {

        echo "MESSAGE:" + err.getMessage()
      }

  //to Run functional test
  //sh "./gradlew functional"
  //enableFullFunctionalTest()

}
