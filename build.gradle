buildscript {
  repositories {
    jcenter()
  }
}

plugins {
  id 'java'
  id 'org.owasp.dependencycheck' version '6.1.1' apply true
}

allprojects {
  sourceCompatibility = '11'
  targetCompatibility = '11'
}

repositories {
  jcenter()
}

dependencyCheck {
  suppressionFile = 'config/owasp/suppressions.xml'
  analyzers {
  // Disable scanning of .NET related binaries
    assemblyEnabled = false
  }
  analyzedTypes = ['jar']
  scanConfigurations = ['runtimeClasspath']
}

task crossbrowser(description: 'Runs crossbrowser tests.') {
  dependsOn(inStrictOrder(awaitApplicationReadiness, installDependencies, checkDependenciesIntegrity, lintUserInterfaceTests, runCrossBrowserTests))
}
task runCrossBrowserTests(type: Exec, description: 'Runs ExpertUI cross brower tests.') {
  onlyIf {
    return System.env.SKIP_BROWSER_TESTS == null || System.env.SKIP_BROWSER_TESTS == 'false'
  }
  commandLine '/usr/bin/yarn', '--silent', 'test:crossbrowser'
}
